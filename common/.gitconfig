# Path: $HOME/.gitconfig

[alias]
	bprune = !git branch --merged | egrep -v '\\*|develop|main|master' | xargs -r git branch -d
	bprunef = !git fetch --prune && git branch -vv | grep ': gone]' | sed 's/^[+* ]*//' | awk '{print $1}' | xargs -r git branch -D
	difft = -c diff.external='difft --color=always --display=inline' diff
	fixup = commit --fixup HEAD
	inico = commit --allow-empty -m ':seedling: initial commit'
	lo = log --oneline
	lp = log -p
	pushf = push --force-with-lease --force-if-includes
	cp = cherry-pick
	vibecommit = !gemini -p \"Generate a conventional commit message about this change. Output a plaintext, not a codeblock\\n$(git diff HEAD)\" -m \"gemini-2.5-flash\" | git commit --author \"vibe-coder <vibe-coder@example.com>\" -F -

[branch]
	sort = -committerdate

[commit]
	gpgsign = true
	verbose = true

[column]
	ui = auto

[core]
	autoCRLF = false
	editor = nvim
	; TODO: prevent snack.nvim's explorer flickering
	; https://github.com/folke/snacks.nvim/issues/1308#issuecomment-2669152591
	; fsmonitor = true
	quotepath = false
	untrackedCache = true
	pager = LESSCHARSET=utf-8 less

[credential "https://github.com"]
	helper =
	helper = !gh auth git-credential

[credential "https://gist.github.com"]
	helper =
	helper = !gh auth git-credential

[diff]
	algorithm = histogram
	colorMoved = plain
	mnemonicPrefix = true
	renames = true

[fetch]
	prune = true
	recurseSubmodules = on-demand

[gpg]
	format = ssh

[gpg "ssh"]
	program = op-ssh-sign

[help]
	autocorrect = prompt

[init]
	defaultBranch = main

# TODO: migrate to zdiff3
[merge]
	conflictstyle = merge

[pull]
	ff = only
	rebase = true

[push]
	autoSetupRemote = true
	default = current
	followTags = true

[rebase]
	autoSquash = true
	autoStash = true
	updateRefs = true

[rerere]
	autoupdate = true
	enabled = false

[tag]
	sort = version:refname

[user]
	email = ras0q@users.noreply.github.com
	name = ras0q
	signingkey = ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAX3CmJvy8KC9p0m5MtgxdetvZBlVzh5r3kg3T/LJeJW

# Include system-wide .gitconfig
[include]
	path = ~/.gitconfig.private
